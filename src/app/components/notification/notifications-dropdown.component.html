<li class="nav-item dropdown" dropdown>
  <a
    dropdownToggle
    type="button"
    class="nav-link waves-light"
    mdbWavesEffect
    id="notifications-toggle"
  >
    <mdb-icon fas icon="bell"></mdb-icon>
    <span *ngIf="showCounter" class="counter">
      <mdb-icon fas icon="exclamation-circle"></mdb-icon>
    </span>
  </a>
  <div
    *dropdownMenu
    class="dropdown-menu dropdown dropdown-primary dropdown-menu-right z-depth-1-half"
    role="menu"
    id="notifications-container"
  >
    <div
      fxLayout
      fxLayoutAlign="space-between center"
      id="notifications-header"
      class="elegant-color white-text"
      [routerLink]="['/notifications']"
    >
      <h6>
        {{ "home.main_menu.notifications_dropdown.inbox" | translate }}
      </h6>
      <div>
        <label>
          {{
            "home.main_menu.notifications_dropdown.view_all_notifications"
              | translate
          }}
        </label>
      </div>
    </div>
    <div
      id="notifications-dropdown"
      fxLayout="column"
      style="overflow-y: scroll;"
    >
      <ul>
        <li
          *ngFor="let notification of notifications"
          [routerLink]="['/notifications']"
          class="notification"
          [ngClass]="{
            'light-green lighten-5 unread': !notification.read
          }"
        >
          <div fxLayout fxFlex class="{{ notification.severity }}">
            <div
              fxLayout
              fxFlex="10"
              fxLayoutAlign="center center"
              class="left-panel"
            >
              <mdb-icon
                fas
                icon="{{ ICONS[notification.severity] }}"
              ></mdb-icon>
            </div>
            <div
              fxFlex="90"
              fxLayoutAlign="center flex-start"
              fxLayout="column"
              class="right-panel"
              [class.unread]="notification.read === false"
            >
              <label class="notification-moment ml-auto mb-auto">
                {{ notification.localeFormat + " " + notification.id }}
              </label>

              <label class="mb-auto">{{ notification.fullname }}</label>
              <p class="notification-payload">
                {{ notification.message }}
              </p>
              <div class="actions">
                <mdb-icon
                  click-event
                  click-event-params="[stopPropagation]"
                  mdbTooltip="{{
                    'notifications_dropdown.' +
                      (notification.read ? 'mark_unread' : 'mark_read')
                      | translate
                  }}"
                  placement="left"
                  far
                  icon="{{ notification.read ? 'envelope-open' : 'envelope' }}"
                  (click)="toggleRead(notification)"
                ></mdb-icon>
              </div>
            </div>
          </div>
        </li>
        <li *ngIf="notifications?.length === 0">
          <div
            class="alert alert-primary"
            role="alert"
            style="text-align: center;"
          >
            {{
              "home.main_menu.notifications_dropdown.no_new_notifications"
                | translate
            }}
          </div>
        </li>
      </ul>
    </div>
  </div>
</li>
